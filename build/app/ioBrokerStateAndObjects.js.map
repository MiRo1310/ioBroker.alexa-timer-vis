{
  "version": 3,
  "sources": ["../../src/app/ioBrokerStateAndObjects.ts"],
  "sourcesContent": ["import type { AlexaJson, TimerIndex } from '@/types/types';\nimport store from '@/store/store';\nimport { errorLogger } from '@/lib/logging';\nimport { isString } from '@/lib/string';\nimport { createStates } from '@/app/createStates';\nimport { isIobrokerValue } from '@/lib/state';\n\nexport const setDeviceNameInObject = async (index: TimerIndex, val: string): Promise<void> => {\n    const pathArray = [store.getAlexaTimerVisInstance(), index];\n    const { adapter } = store;\n    try {\n        await adapter.setObject(pathArray.join('.'), {\n            type: 'device',\n            common: { name: val },\n            native: {},\n        });\n    } catch (e: any) {\n        errorLogger('Error setDeviceNameInObject', e, null);\n    }\n};\n\nexport async function getParsedAlexaJson(): Promise<AlexaJson | undefined> {\n    try {\n        const instance = store.getAlexaInstanceObject().instance;\n        const jsonAlexa = await store.adapter.getForeignStateAsync(`alexa2.${instance}.History.json`);\n        if (isString(jsonAlexa?.val)) {\n            return JSON.parse(jsonAlexa.val);\n        }\n    } catch (e) {\n        errorLogger('Error in getParsedAlexaJson', e, null);\n    }\n}\n\nexport const setAdapterStatusAndInitStateCreation = async (): Promise<void> => {\n    const adapter = store.adapter;\n    const result = await adapter.getForeignObjectAsync(store.pathAlexaStateToListenTo);\n    if (!result) {\n        adapter.log.warn(`The State ${store.pathAlexaStateToListenTo} was not found!`);\n        return;\n    }\n    adapter.log.info('Alexa State was found');\n    await adapter.setState('info.connection', true, true);\n\n    await createStates(4);\n};\n\nexport function isAlexaSummaryStateChanged({ state, id }: { state?: ioBroker.State | null; id: string }): boolean {\n    return isIobrokerValue(state) && isString(state.val) && state.val !== '' && id === store.pathAlexaStateToListenTo;\n}\n\nexport const isAlexaTimerVisResetButton = (state: ioBroker.State | null | undefined, id: string): boolean =>\n    isIobrokerValue(state) && id.includes('.Reset');\n\nexport const isTimerAction = (state: ioBroker.State | null | undefined): boolean =>\n    [\n        'SetNotificationIntent',\n        'ShortenNotificationIntent',\n        'ExtendNotificationIntent',\n        'RemoveNotificationIntent',\n    ].includes(String(state?.val ?? ''));\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,mBAAkB;AAClB,qBAA4B;AAC5B,oBAAyB;AACzB,0BAA6B;AAC7B,mBAAgC;AAEzB,MAAM,wBAAwB,OAAO,OAAmB,QAA+B;AAC1F,QAAM,YAAY,CAAC,aAAAA,QAAM,yBAAyB,GAAG,KAAK;AAC1D,QAAM,EAAE,QAAQ,IAAI,aAAAA;AACpB,MAAI;AACA,UAAM,QAAQ,UAAU,UAAU,KAAK,GAAG,GAAG;AAAA,MACzC,MAAM;AAAA,MACN,QAAQ,EAAE,MAAM,IAAI;AAAA,MACpB,QAAQ,CAAC;AAAA,IACb,CAAC;AAAA,EACL,SAAS,GAAQ;AACb,oCAAY,+BAA+B,GAAG,IAAI;AAAA,EACtD;AACJ;AAEA,eAAsB,qBAAqD;AACvE,MAAI;AACA,UAAM,WAAW,aAAAA,QAAM,uBAAuB,EAAE;AAChD,UAAM,YAAY,MAAM,aAAAA,QAAM,QAAQ,qBAAqB,UAAU,QAAQ,eAAe;AAC5F,YAAI,wBAAS,uCAAW,GAAG,GAAG;AAC1B,aAAO,KAAK,MAAM,UAAU,GAAG;AAAA,IACnC;AAAA,EACJ,SAAS,GAAG;AACR,oCAAY,+BAA+B,GAAG,IAAI;AAAA,EACtD;AACJ;AAEO,MAAM,uCAAuC,YAA2B;AAC3E,QAAM,UAAU,aAAAA,QAAM;AACtB,QAAM,SAAS,MAAM,QAAQ,sBAAsB,aAAAA,QAAM,wBAAwB;AACjF,MAAI,CAAC,QAAQ;AACT,YAAQ,IAAI,KAAK,aAAa,aAAAA,QAAM,wBAAwB,iBAAiB;AAC7E;AAAA,EACJ;AACA,UAAQ,IAAI,KAAK,uBAAuB;AACxC,QAAM,QAAQ,SAAS,mBAAmB,MAAM,IAAI;AAEpD,YAAM,kCAAa,CAAC;AACxB;AAEO,SAAS,2BAA2B,EAAE,OAAO,GAAG,GAA2D;AAC9G,aAAO,8BAAgB,KAAK,SAAK,wBAAS,MAAM,GAAG,KAAK,MAAM,QAAQ,MAAM,OAAO,aAAAA,QAAM;AAC7F;AAEO,MAAM,6BAA6B,CAAC,OAA0C,WACjF,8BAAgB,KAAK,KAAK,GAAG,SAAS,QAAQ;AAE3C,MAAM,gBAAgB,CAAC,UAAmD;AArDjF;AAsDI;AAAA,IACI;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ,EAAE,SAAS,QAAO,oCAAO,QAAP,YAAc,EAAE,CAAC;AAAA;",
  "names": ["store"]
}
