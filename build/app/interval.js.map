{
  "version": 3,
  "sources": ["../../src/app/interval.ts"],
  "sourcesContent": ["import { timerObject } from '@/config/timer-data';\nimport store from '@/store/store';\nimport { errorLogger } from '@/lib/logging';\nimport type { Timer } from '@/app/timer';\nimport { generateTimerValues } from '@/app/generate-timer-values';\nimport { resetTimer } from '@/app/reset';\nimport { secToHourMinSec } from '@/lib/time';\n\nexport const interval = (sec: number, name: string, timer: Timer, int: number, onlyOneTimer: boolean): void => {\n    const adapter = store.adapter;\n    const timerIndex = timer.getTimerIndex();\n\n    if (!timerIndex) {\n        return;\n    }\n    generateTimerValues(timer, sec, name);\n\n    const { string } = secToHourMinSec(sec, false);\n    timer.setLengthTimer(string);\n    if (timerObject.interval[timerIndex as keyof typeof timerObject.interval] || !timer.isActive) {\n        return;\n    }\n\n    timerObject.interval[timerIndex as keyof typeof timerObject.interval] = adapter.setInterval(() => {\n        const timeLeftSec = generateTimerValues(timer, sec, name);\n\n        if (timeLeftSec <= 60 && !onlyOneTimer) {\n            onlyOneTimer = true;\n\n            if (timerObject.interval[timerIndex as keyof typeof timerObject.interval]) {\n                clearIntervalByTimerIndex(timerIndex, timer);\n            }\n\n            interval(sec, name, timer, timerObject.timer[timerIndex].getInterval(), true);\n        }\n\n        if (timeLeftSec <= 0 || !timerObject.timerActive.timer[timerIndex]) {\n            timerObject.timerActive.timerCount--;\n\n            resetTimer(timer).catch((e: any) => {\n                errorLogger('Error in interval', e);\n            });\n\n            adapter.log.debug('Timer stopped');\n\n            if (timerObject.interval[timerIndex as keyof typeof timerObject.interval]) {\n                clearIntervalByTimerIndex(timerIndex, timer);\n            }\n        }\n    }, int);\n};\n\nfunction clearIntervalByTimerIndex(timerIndex: string, timer: Timer): void {\n    store.adapter.clearInterval(timerObject.interval[timerIndex as keyof typeof timerObject.interval]);\n    timer.isActive = false;\n    timerObject.interval[timerIndex as keyof typeof timerObject.interval] = null;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA4B;AAC5B,mBAAkB;AAClB,qBAA4B;AAE5B,mCAAoC;AACpC,mBAA2B;AAC3B,kBAAgC;AAEzB,MAAM,WAAW,CAAC,KAAa,MAAc,OAAc,KAAa,iBAAgC;AAC3G,QAAM,UAAU,aAAAA,QAAM;AACtB,QAAM,aAAa,MAAM,cAAc;AAEvC,MAAI,CAAC,YAAY;AACb;AAAA,EACJ;AACA,wDAAoB,OAAO,KAAK,IAAI;AAEpC,QAAM,EAAE,OAAO,QAAI,6BAAgB,KAAK,KAAK;AAC7C,QAAM,eAAe,MAAM;AAC3B,MAAI,8BAAY,SAAS,UAA+C,KAAK,CAAC,MAAM,UAAU;AAC1F;AAAA,EACJ;AAEA,gCAAY,SAAS,UAA+C,IAAI,QAAQ,YAAY,MAAM;AAC9F,UAAM,kBAAc,kDAAoB,OAAO,KAAK,IAAI;AAExD,QAAI,eAAe,MAAM,CAAC,cAAc;AACpC,qBAAe;AAEf,UAAI,8BAAY,SAAS,UAA+C,GAAG;AACvE,kCAA0B,YAAY,KAAK;AAAA,MAC/C;AAEA,eAAS,KAAK,MAAM,OAAO,8BAAY,MAAM,UAAU,EAAE,YAAY,GAAG,IAAI;AAAA,IAChF;AAEA,QAAI,eAAe,KAAK,CAAC,8BAAY,YAAY,MAAM,UAAU,GAAG;AAChE,oCAAY,YAAY;AAExB,mCAAW,KAAK,EAAE,MAAM,CAAC,MAAW;AAChC,wCAAY,qBAAqB,CAAC;AAAA,MACtC,CAAC;AAED,cAAQ,IAAI,MAAM,eAAe;AAEjC,UAAI,8BAAY,SAAS,UAA+C,GAAG;AACvE,kCAA0B,YAAY,KAAK;AAAA,MAC/C;AAAA,IACJ;AAAA,EACJ,GAAG,GAAG;AACV;AAEA,SAAS,0BAA0B,YAAoB,OAAoB;AACvE,eAAAA,QAAM,QAAQ,cAAc,8BAAY,SAAS,UAA+C,CAAC;AACjG,QAAM,WAAW;AACjB,gCAAY,SAAS,UAA+C,IAAI;AAC5E;",
  "names": ["store"]
}
