{
  "version": 3,
  "sources": ["../../src/app/write-state-interval.ts"],
  "sourcesContent": ["import store from '@/store/store';\nimport { timerObject } from '@/config/timer-data';\nimport { writeStates } from '@/app/write-state';\nimport errorLogger from '@/lib/logging';\n\n/**\n * Starts an interval to periodically write the state of all active timers.\n */\nexport const writeStateInterval = (): void => {\n    const { adapter } = store;\n    try {\n        if (store.interval) {\n            return;\n        }\n        store.interval = adapter.setInterval((): void => {\n            writeStates({ reset: false }).catch((e: any) => {\n                errorLogger.send({ title: 'Error writeStateIntervall', e });\n            });\n\n            if (!Object.keys(timerObject.timer)?.find(t => timerObject.timer[t].isActive)) {\n                adapter.setStateChanged('all_Timer.alive', false, true);\n                adapter.clearInterval(store.interval);\n                store.interval = null;\n\n                adapter.log.debug('Interval stopped!');\n            }\n        }, timerObject.timerActive.data.interval);\n    } catch (e: any) {\n        errorLogger.send({ title: 'Error writeStateIntervall', e });\n\n        adapter.clearInterval(store.interval);\n    }\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAkB;AAClB,wBAA4B;AAC5B,yBAA4B;AAC5B,qBAAwB;AAKjB,MAAM,qBAAqB,MAAY;AAC1C,QAAM,EAAE,QAAQ,IAAI,aAAAA;AACpB,MAAI;AACA,QAAI,aAAAA,QAAM,UAAU;AAChB;AAAA,IACJ;AACA,iBAAAA,QAAM,WAAW,QAAQ,YAAY,MAAY;AAdzD;AAeY,0CAAY,EAAE,OAAO,MAAM,CAAC,EAAE,MAAM,CAAC,MAAW;AAC5C,uBAAAC,QAAY,KAAK,EAAE,OAAO,6BAA6B,EAAE,CAAC;AAAA,MAC9D,CAAC;AAED,UAAI,GAAC,YAAO,KAAK,8BAAY,KAAK,MAA7B,mBAAgC,KAAK,OAAK,8BAAY,MAAM,CAAC,EAAE,YAAW;AAC3E,gBAAQ,gBAAgB,mBAAmB,OAAO,IAAI;AACtD,gBAAQ,cAAc,aAAAD,QAAM,QAAQ;AACpC,qBAAAA,QAAM,WAAW;AAEjB,gBAAQ,IAAI,MAAM,mBAAmB;AAAA,MACzC;AAAA,IACJ,GAAG,8BAAY,YAAY,KAAK,QAAQ;AAAA,EAC5C,SAAS,GAAQ;AACb,mBAAAC,QAAY,KAAK,EAAE,OAAO,6BAA6B,EAAE,CAAC;AAE1D,YAAQ,cAAc,aAAAD,QAAM,QAAQ;AAAA,EACxC;AACJ;",
  "names": ["store", "errorLogger"]
}
