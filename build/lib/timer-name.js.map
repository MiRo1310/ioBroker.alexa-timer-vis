{
  "version": 3,
  "sources": ["../../src/lib/timer-name.ts"],
  "sourcesContent": ["import { useStore } from '../store/store';\nimport type { AlexaActiveTimerList, Timers } from '../types/types';\nimport { isIobrokerValue } from './global';\nimport { timerObject } from '../config/timer-data';\nimport { errorLogger } from './logging';\nimport type { Timer } from '../app/timer';\n\nexport const getNewTimerName = (jsonString: ioBroker.State, timerSelector: keyof Timers): void => {\n    const { _this } = useStore();\n\n    let json: AlexaActiveTimerList[] = [];\n    try {\n        if (isIobrokerValue(jsonString)) {\n            json = JSON.parse(jsonString.val as string);\n        }\n        const timer = timerObject.timer[timerSelector];\n        if (json.length === 1) {\n            saveLabelAndId(json[0], timer);\n            return;\n        }\n\n        const timerWithUniqueId = getTimerWithUniqueId(json);\n        if (timerWithUniqueId) {\n            saveLabelAndId(timerWithUniqueId, timer);\n        }\n    } catch (e: any) {\n        errorLogger('Error in getNewTimerName', e, _this);\n    }\n};\n\nfunction getTimerWithUniqueId(json: AlexaActiveTimerList[]): AlexaActiveTimerList | null {\n    let timerWithUniqueId: AlexaActiveTimerList | null = null;\n    for (let i = 0; i < json.length; i++) {\n        if (timerWithUniqueId) {\n            break;\n        }\n        for (const timer in timerObject.timer) {\n            if (timerObject.timer[timer].getId() === json[i].id) {\n                timerWithUniqueId = null;\n                break;\n            }\n            timerWithUniqueId = { id: json[i].id, label: json[i].label || '', triggerTime: json[i].triggerTime };\n        }\n    }\n    return timerWithUniqueId;\n}\n\nfunction saveLabelAndId({ id, label }: AlexaActiveTimerList, timer: Timer): void {\n    timer.setId(id);\n    timer.setAlexaTimerName(label ?? '');\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAyB;AAEzB,oBAAgC;AAChC,wBAA4B;AAC5B,qBAA4B;AAGrB,MAAM,kBAAkB,CAAC,YAA4B,kBAAsC;AAC9F,QAAM,EAAE,MAAM,QAAI,uBAAS;AAE3B,MAAI,OAA+B,CAAC;AACpC,MAAI;AACA,YAAI,+BAAgB,UAAU,GAAG;AAC7B,aAAO,KAAK,MAAM,WAAW,GAAa;AAAA,IAC9C;AACA,UAAM,QAAQ,8BAAY,MAAM,aAAa;AAC7C,QAAI,KAAK,WAAW,GAAG;AACnB,qBAAe,KAAK,CAAC,GAAG,KAAK;AAC7B;AAAA,IACJ;AAEA,UAAM,oBAAoB,qBAAqB,IAAI;AACnD,QAAI,mBAAmB;AACnB,qBAAe,mBAAmB,KAAK;AAAA,IAC3C;AAAA,EACJ,SAAS,GAAQ;AACb,oCAAY,4BAA4B,GAAG,KAAK;AAAA,EACpD;AACJ;AAEA,SAAS,qBAAqB,MAA2D;AACrF,MAAI,oBAAiD;AACrD,WAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AAClC,QAAI,mBAAmB;AACnB;AAAA,IACJ;AACA,eAAW,SAAS,8BAAY,OAAO;AACnC,UAAI,8BAAY,MAAM,KAAK,EAAE,MAAM,MAAM,KAAK,CAAC,EAAE,IAAI;AACjD,4BAAoB;AACpB;AAAA,MACJ;AACA,0BAAoB,EAAE,IAAI,KAAK,CAAC,EAAE,IAAI,OAAO,KAAK,CAAC,EAAE,SAAS,IAAI,aAAa,KAAK,CAAC,EAAE,YAAY;AAAA,IACvG;AAAA,EACJ;AACA,SAAO;AACX;AAEA,SAAS,eAAe,EAAE,IAAI,MAAM,GAAyB,OAAoB;AAC7E,QAAM,MAAM,EAAE;AACd,QAAM,kBAAkB,wBAAS,EAAE;AACvC;",
  "names": []
}
