{
  "version": 3,
  "sources": ["../../src/lib/interval.ts"],
  "sourcesContent": ["import { timerObject } from '@/config/timer-data';\nimport store from '@/store/store';\nimport { errorLogger } from '@/lib//logging';\nimport type { Timer } from '@/app/timer';\nimport { generateValues } from '@/lib/generate-values';\nimport { resetValues } from '@/app/reset';\nimport { secToHourMinSec } from '@/lib/time';\n\nexport const interval = (sec: number, name: string, timer: Timer, int: number, onlyOneTimer: boolean): void => {\n    const adapter = store.adapter;\n    const timerIndex = timer.getTimerIndex();\n\n    if (!timerIndex) {\n        throw new Error('TimerIndex was not set');\n    }\n    generateValues(timer, sec, name);\n\n    const { string } = secToHourMinSec(sec, false);\n    timer.setLengthTimer(string);\n\n    timerObject.interval[timerIndex as keyof typeof timerObject.interval] = adapter.setInterval(() => {\n        const timeLeftSec = generateValues(timer, sec, name);\n        const ioBrokerInterval = timerObject.interval[timerIndex as keyof typeof timerObject.interval];\n        if (timeLeftSec <= 60 && !onlyOneTimer) {\n            onlyOneTimer = true;\n\n            if (ioBrokerInterval) {\n                adapter.clearInterval(ioBrokerInterval);\n            }\n\n            interval(sec, name, timer, timerObject.timer[timerIndex].getInterval(), true);\n        }\n\n        if (timeLeftSec <= 0 || !timerObject.timerActive.timer[timerIndex]) {\n            timerObject.timerActive.timerCount--;\n\n            resetValues(timer).catch((e: any) => {\n                errorLogger('Error in interval', e);\n            });\n\n            adapter.log.debug('Timer stopped');\n\n            if (ioBrokerInterval) {\n                adapter.clearInterval(ioBrokerInterval);\n\n                timerObject.interval[timerIndex as keyof typeof timerObject.interval] = null;\n            }\n        }\n    }, int);\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA4B;AAC5B,mBAAkB;AAClB,qBAA4B;AAE5B,6BAA+B;AAC/B,mBAA4B;AAC5B,kBAAgC;AAEzB,MAAM,WAAW,CAAC,KAAa,MAAc,OAAc,KAAa,iBAAgC;AAC3G,QAAM,UAAU,aAAAA,QAAM;AACtB,QAAM,aAAa,MAAM,cAAc;AAEvC,MAAI,CAAC,YAAY;AACb,UAAM,IAAI,MAAM,wBAAwB;AAAA,EAC5C;AACA,6CAAe,OAAO,KAAK,IAAI;AAE/B,QAAM,EAAE,OAAO,QAAI,6BAAgB,KAAK,KAAK;AAC7C,QAAM,eAAe,MAAM;AAE3B,gCAAY,SAAS,UAA+C,IAAI,QAAQ,YAAY,MAAM;AAC9F,UAAM,kBAAc,uCAAe,OAAO,KAAK,IAAI;AACnD,UAAM,mBAAmB,8BAAY,SAAS,UAA+C;AAC7F,QAAI,eAAe,MAAM,CAAC,cAAc;AACpC,qBAAe;AAEf,UAAI,kBAAkB;AAClB,gBAAQ,cAAc,gBAAgB;AAAA,MAC1C;AAEA,eAAS,KAAK,MAAM,OAAO,8BAAY,MAAM,UAAU,EAAE,YAAY,GAAG,IAAI;AAAA,IAChF;AAEA,QAAI,eAAe,KAAK,CAAC,8BAAY,YAAY,MAAM,UAAU,GAAG;AAChE,oCAAY,YAAY;AAExB,oCAAY,KAAK,EAAE,MAAM,CAAC,MAAW;AACjC,wCAAY,qBAAqB,CAAC;AAAA,MACtC,CAAC;AAED,cAAQ,IAAI,MAAM,eAAe;AAEjC,UAAI,kBAAkB;AAClB,gBAAQ,cAAc,gBAAgB;AAEtC,sCAAY,SAAS,UAA+C,IAAI;AAAA,MAC5E;AAAA,IACJ;AAAA,EACJ,GAAG,GAAG;AACV;",
  "names": ["store"]
}
