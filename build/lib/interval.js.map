{
  "version": 3,
  "sources": ["../../src/lib/interval.ts"],
  "sourcesContent": ["import { timerObject } from '@/config/timer-data';\nimport { useStore } from '@/store/store';\nimport { errorLogger } from '@/lib//logging';\nimport type { Timer } from '@/app/timer';\nimport { generateValues } from '@/lib/generate-values';\nimport { secToHourMinSec } from '@/lib/global';\nimport { resetValues } from '@/app/reset';\n\nexport const interval = (sec: number, name: string, timer: Timer, int: number, onlyOneTimer: boolean): void => {\n    const store = useStore();\n    const _this = store._this;\n    const timerIndex = timer.getTimerIndex();\n\n    if (!timerIndex) {\n        return;\n    }\n    generateValues(timer, sec, timerIndex, name);\n\n    const { string } = secToHourMinSec(sec, false);\n    timer.setLengthTimer(string);\n\n    if (!timerIndex) {\n        return;\n    }\n\n    timerObject.interval[timerIndex as keyof typeof timerObject.interval] = _this.setInterval(() => {\n        const timeLeftSec = generateValues(timer, sec, timerIndex, name);\n        const ioBrokerInterval = timerObject.interval[timerIndex as keyof typeof timerObject.interval];\n        if (timeLeftSec <= 60 && !onlyOneTimer) {\n            onlyOneTimer = true;\n\n            if (ioBrokerInterval) {\n                _this.clearInterval(ioBrokerInterval);\n            }\n\n            interval(sec, name, timer, timerObject.timer[timerIndex].getInterval(), true);\n        }\n\n        if (timeLeftSec <= 0 || !timerObject.timerActive.timer[timerIndex]) {\n            timerObject.timerActive.timerCount--;\n\n            resetValues(timer).catch((e: any) => {\n                errorLogger('Error in interval', e, _this);\n            });\n\n            _this.log.debug('Timer stopped');\n\n            if (ioBrokerInterval) {\n                _this.clearInterval(ioBrokerInterval);\n\n                timerObject.interval[timerIndex as keyof typeof timerObject.interval] = null;\n            }\n        }\n    }, int);\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA4B;AAC5B,mBAAyB;AACzB,qBAA4B;AAE5B,6BAA+B;AAC/B,oBAAgC;AAChC,mBAA4B;AAErB,MAAM,WAAW,CAAC,KAAa,MAAc,OAAc,KAAa,iBAAgC;AAC3G,QAAM,YAAQ,uBAAS;AACvB,QAAM,QAAQ,MAAM;AACpB,QAAM,aAAa,MAAM,cAAc;AAEvC,MAAI,CAAC,YAAY;AACb;AAAA,EACJ;AACA,6CAAe,OAAO,KAAK,YAAY,IAAI;AAE3C,QAAM,EAAE,OAAO,QAAI,+BAAgB,KAAK,KAAK;AAC7C,QAAM,eAAe,MAAM;AAE3B,MAAI,CAAC,YAAY;AACb;AAAA,EACJ;AAEA,gCAAY,SAAS,UAA+C,IAAI,MAAM,YAAY,MAAM;AAC5F,UAAM,kBAAc,uCAAe,OAAO,KAAK,YAAY,IAAI;AAC/D,UAAM,mBAAmB,8BAAY,SAAS,UAA+C;AAC7F,QAAI,eAAe,MAAM,CAAC,cAAc;AACpC,qBAAe;AAEf,UAAI,kBAAkB;AAClB,cAAM,cAAc,gBAAgB;AAAA,MACxC;AAEA,eAAS,KAAK,MAAM,OAAO,8BAAY,MAAM,UAAU,EAAE,YAAY,GAAG,IAAI;AAAA,IAChF;AAEA,QAAI,eAAe,KAAK,CAAC,8BAAY,YAAY,MAAM,UAAU,GAAG;AAChE,oCAAY,YAAY;AAExB,oCAAY,KAAK,EAAE,MAAM,CAAC,MAAW;AACjC,wCAAY,qBAAqB,GAAG,KAAK;AAAA,MAC7C,CAAC;AAED,YAAM,IAAI,MAAM,eAAe;AAE/B,UAAI,kBAAkB;AAClB,cAAM,cAAc,gBAAgB;AAEpC,sCAAY,SAAS,UAA+C,IAAI;AAAA,MAC5E;AAAA,IACJ;AAAA,EACJ,GAAG,GAAG;AACV;",
  "names": []
}
