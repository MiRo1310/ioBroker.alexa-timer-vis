{
  "version": 3,
  "sources": ["../../src/lib/interval.ts"],
  "sourcesContent": ["import type { TimerSelector } from '@/types/types';\nimport { timerObject } from '@/config/timer-data';\nimport { useStore } from '@/store/store';\nimport { errorLogger } from '@/lib//logging';\nimport type { Timer } from '@/app/timer';\nimport { generateValues } from '@/lib/generate-values';\nimport { secToHourMinSec } from '@/lib/global';\nimport { resetValues } from '@/lib/reset';\n\nexport const interval = (\n    sec: number,\n    timerBlock: TimerSelector,\n    name: string,\n    timer: Timer,\n    int: number,\n    onlyOneTimer: boolean,\n): void => {\n    const store = useStore();\n    const _this = store._this;\n\n    generateValues(timer, sec, timerBlock, name);\n\n    const { string } = secToHourMinSec(sec, false);\n    timer.setLengthTimer(string);\n\n    if (!timerBlock) {\n        return;\n    }\n\n    timerObject.interval[timerBlock as keyof typeof timerObject.interval] = _this.setInterval(() => {\n        const timeLeftSec = generateValues(timer, sec, timerBlock, name);\n\n        if (timeLeftSec <= 60 && !onlyOneTimer) {\n            onlyOneTimer = true;\n\n            if (timerObject.interval) {\n                _this.clearInterval(\n                    timerObject.interval[timerBlock as keyof typeof timerObject.interval] as ioBroker.Interval,\n                );\n            }\n\n            interval(sec, timerBlock, name, timer, timerObject.timer[timerBlock].getInterval(), true);\n        }\n\n        if (timeLeftSec <= 0 || !timerObject.timerActive.timer[timerBlock]) {\n            timerObject.timerActive.timerCount--;\n\n            resetValues(timer, timerBlock).catch((e: any) => {\n                errorLogger('Error in interval', e, _this);\n            });\n\n            _this.log.debug('Timer stopped');\n\n            if (timerObject.interval) {\n                _this.clearInterval(\n                    timerObject.interval[timerBlock as keyof typeof timerObject.interval] as ioBroker.Interval,\n                );\n\n                timerObject.interval[timerBlock as keyof typeof timerObject.interval] = null;\n            }\n        }\n    }, int);\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,wBAA4B;AAC5B,mBAAyB;AACzB,qBAA4B;AAE5B,6BAA+B;AAC/B,oBAAgC;AAChC,mBAA4B;AAErB,MAAM,WAAW,CACpB,KACA,YACA,MACA,OACA,KACA,iBACO;AACP,QAAM,YAAQ,uBAAS;AACvB,QAAM,QAAQ,MAAM;AAEpB,6CAAe,OAAO,KAAK,YAAY,IAAI;AAE3C,QAAM,EAAE,OAAO,QAAI,+BAAgB,KAAK,KAAK;AAC7C,QAAM,eAAe,MAAM;AAE3B,MAAI,CAAC,YAAY;AACb;AAAA,EACJ;AAEA,gCAAY,SAAS,UAA+C,IAAI,MAAM,YAAY,MAAM;AAC5F,UAAM,kBAAc,uCAAe,OAAO,KAAK,YAAY,IAAI;AAE/D,QAAI,eAAe,MAAM,CAAC,cAAc;AACpC,qBAAe;AAEf,UAAI,8BAAY,UAAU;AACtB,cAAM;AAAA,UACF,8BAAY,SAAS,UAA+C;AAAA,QACxE;AAAA,MACJ;AAEA,eAAS,KAAK,YAAY,MAAM,OAAO,8BAAY,MAAM,UAAU,EAAE,YAAY,GAAG,IAAI;AAAA,IAC5F;AAEA,QAAI,eAAe,KAAK,CAAC,8BAAY,YAAY,MAAM,UAAU,GAAG;AAChE,oCAAY,YAAY;AAExB,oCAAY,OAAO,UAAU,EAAE,MAAM,CAAC,MAAW;AAC7C,wCAAY,qBAAqB,GAAG,KAAK;AAAA,MAC7C,CAAC;AAED,YAAM,IAAI,MAAM,eAAe;AAE/B,UAAI,8BAAY,UAAU;AACtB,cAAM;AAAA,UACF,8BAAY,SAAS,UAA+C;AAAA,QACxE;AAEA,sCAAY,SAAS,UAA+C,IAAI;AAAA,MAC5E;AAAA,IACJ;AAAA,EACJ,GAAG,GAAG;AACV;",
  "names": []
}
